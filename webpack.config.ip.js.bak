/*
 * @Author: yangtmm 
 * @Date: 2017-11-23 18:13:17 
 * @Last Modified by: yangtmm
 * @Last Modified time: 2017-11-24 10:56:49
 */

//webpack.config.ip.js
var webpack = require('webpack');
var merge = require('webpack-merge');

var path = require('path');
var CommonsChunkPlugin = require("webpack/lib/optimize/CommonsChunkPlugin");
var baseWebpackConfig = require('./npm-script/common.config');


var hostIP = "localhost";
var port = 3000;

module.exports = merge(baseWebpackConfig, {
    output: {
        path: __dirname + "/lib",
        publicPath: "//" + hostIP + ":" + port + "/lib",
        filename: "[name].min.js", //打包后输出的文件名
        chunkFilename: "[id].chunk.js"
    },
    devtool: 'cheap-module-eval-source-map',
    plugins: [
        new webpack.HotModuleReplacementPlugin(), //热加载插件
        new webpack.optimize.CommonsChunkPlugin( /* chunkName= */ "vendor", /* filename= */ "vendor.bundle.js"),
        new webpack.optimize.MinChunkSizePlugin({
            minChunkSize: 10240
        }),
        new webpack.DefinePlugin({
            'process.env.NODE_ENV': '"development"'
        })
    ],
    devServer: {
        headers: {
            "Access-Control-Allow-Origin": "*"
        },
        devtool: 'cheap-module-eval-source-map',
        hot: true,
        inline: true,
        port: port,
        host: hostIP
    }
})